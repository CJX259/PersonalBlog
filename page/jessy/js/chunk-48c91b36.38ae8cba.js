(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48c91b36"],{"62a9":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"blogComment"}},[n("span",[t._v(t._s(t.commentsCount)+" Comments")]),n("ul",t._l(t.commentList,(function(e){return n("li",{key:e.id},[n("span",{staticClass:"user_name"},[t._v(" "+t._s(e.user_name)+": "),1==e.parent?n("span",{staticClass:"user_name"},[t._v("@"+t._s(e.parent_name))]):t._e()]),n("span",{staticClass:"date"},[t._v(t._s(e.ctime))]),n("p",[t._v(" "+t._s(e.comments)+" "),n("span",{staticClass:"res",on:{click:function(n){return n.preventDefault(),t.huifu(e.user_name)}}},[t._v("[回复]")])])])})),0)]),n("div",{staticClass:"addComment",attrs:{id:"addComment"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",placeholder:"Nick Name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{placeholder:"content"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputRandomCode,expression:"inputRandomCode"}],attrs:{type:"text"},domProps:{value:t.inputRandomCode},on:{input:function(e){e.target.composing||(t.inputRandomCode=e.target.value)}}}),n("span",{domProps:{innerHTML:t._s(t.randomSvg)},on:{click:t.changeCode}}),n("button",{on:{click:t.sendComment}},[t._v("提交留言")])])])},o=[],m=n("2f62");let i=n("bc3a");var s={data(){return{commentList:[],commentsCount:0,randomSvg:"",rightCode:"",name:"",email:"",comment:"",inputRandomCode:"",parentName:"0",parent:-1}},computed:{...Object(m["b"])(["bid"])},methods:{huifu(t){this.parent=1,this.parentName=t,window.scrollTo(0,document.body.scrollHeight)},changeCode(){i({url:"/getRandomCode",method:"get"}).then(t=>{this.randomSvg=t.data.data.data,this.rightCode=t.data.data.text}).catch(t=>{console.log(t)})},sendComment(){""!=this.name&&""!=this.email&&""!=this.comment&&""!=this.inputRandomCode?this.inputRandomCode.toLowerCase()==this.rightCode.toLowerCase()?i({url:"/sendComment?bid="+this.bid+"&parent="+this.parent+"&name="+this.name+"&email="+this.email+"&comment="+this.comment+"&parentName="+this.parentName,method:"get"}).then(t=>{alert("留言成功"),this.getComments()}):alert("验证码错误"):alert("内容不能为空")},initData(){this.commentList=[],this.commentsCount=0,this.randomSvg="",this.rightCode="",this.name="",this.email="",this.comment="",this.inputRandomCode="",this.parentName="0",this.parent=-1},getBid(){this.initData(),"/about"!=this.$route.path&&"/guestbook"!=this.$route.path||this.$store.commit("changeBid",-1)},getComments(){this.getBid(),i({url:"/getCommentsByBlogId?bid="+this.bid,method:"get"}).then(t=>{this.commentList=t.data.data}),i({url:"/getCommentsCountByBlogId?bid="+this.bid,method:"get"}).then(t=>{this.commentsCount=t.data.data[0].count}),this.changeCode()}},watch:{$route:"getComments"},created(){this.getComments()}},d=s,r=(n("f305"),n("2877")),c=Object(r["a"])(d,a,o,!1,null,"1d7c4bcc",null);e["default"]=c.exports},b01e:function(t,e,n){},f305:function(t,e,n){"use strict";var a=n("b01e"),o=n.n(a);o.a}}]);
//# sourceMappingURL=chunk-48c91b36.38ae8cba.js.map